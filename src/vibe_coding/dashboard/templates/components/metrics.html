<div class="grid grid-cols-2 gap-4 h-full">
    <!-- Cost Metric -->
    <div class="bg-gray-700/50 rounded p-4 flex flex-col justify-center items-center">
        <h4 class="text-xs text-gray-400 uppercase tracking-wider mb-2">Est. Cost</h4>
        <div class="text-3xl font-bold text-green-400">
            ${{ metrics.get('efficiency', {}).get('total_cost_usd', 0.00) }}
        </div>
        <div class="text-xs text-gray-500 mt-1">
            ${{ metrics.get('efficiency', {}).get('cost_per_task', 0.00) }} / task
        </div>
    </div>

    <!-- Success Rate -->
    <div class="bg-gray-700/50 rounded p-4 flex flex-col justify-center items-center">
        <h4 class="text-xs text-gray-400 uppercase tracking-wider mb-2">Success Rate</h4>
        <div class="text-3xl font-bold text-blue-400">
            {{ "%.0f"|format(metrics.get('efficiency', {}).get('success_rate', 0)) }}%
        </div>
        <div class="text-xs text-gray-500 mt-1">
            {{ metrics.get('task_stats', {}).get('completed', 0) }} / {{ metrics.get('task_stats', {}).get('total', 0)
            }} tasks
        </div>
    </div>

    <!-- Token Usage Bar Chart (CSS based) -->
    <div class="col-span-2 bg-gray-700/30 rounded p-4 mt-2">
        <h4 class="text-xs text-gray-400 uppercase tracking-wider mb-3">Token Usage by Agent</h4>
        <div class="space-y-3">
            {% set max_tokens = metrics.get('token_usage', {}).values()|max or 1 %}

            <!-- Gemini -->
            {% set gemini = metrics.get('token_usage', {}).get('gemini', 0) %}
            <div class="flex items-center text-xs">
                <span class="w-16 text-gray-400">Gemini</span>
                <div class="flex-1 h-2 bg-gray-800 rounded-full overflow-hidden mx-2">
                    <div class="h-full bg-purple-500" style="width: {{ (gemini / max_tokens * 100)|round }}%"></div>
                </div>
                <span class="w-12 text-right text-gray-300">{{ (gemini/1000)|round(1) }}k</span>
            </div>

            <!-- Claude -->
            {% set claude = metrics.get('token_usage', {}).get('claude', 0) %}
            <div class="flex items-center text-xs">
                <span class="w-16 text-gray-400">Claude</span>
                <div class="flex-1 h-2 bg-gray-800 rounded-full overflow-hidden mx-2">
                    <div class="h-full bg-orange-500" style="width: {{ (claude / max_tokens * 100)|round }}%"></div>
                </div>
                <span class="w-12 text-right text-gray-300">{{ (claude/1000)|round(1) }}k</span>
            </div>

            <!-- Codex -->
            {% set codex = metrics.get('token_usage', {}).get('codex', 0) %}
            <div class="flex items-center text-xs">
                <span class="w-16 text-gray-400">Codex</span>
                <div class="flex-1 h-2 bg-gray-800 rounded-full overflow-hidden mx-2">
                    <div class="h-full bg-green-500" style="width: {{ (codex / max_tokens * 100)|round }}%"></div>
                </div>
                <span class="w-12 text-right text-gray-300">{{ (codex/1000)|round(1) }}k</span>
            </div>
        </div>
    </div>
</div>